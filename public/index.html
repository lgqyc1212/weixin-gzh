<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/index.css">
    <title>按钮</title>
</head>

<body>
    <script src="./lib/jquery.min.js"></script>
    <script src="./lib/jweixin-1.4.0.js"></script>
    <a href="javascript:;" class="weui-btn weui-btn_primary" id="btn">绿色按钮</a>
    <script>
        $.ajax({
            url: 'http://api.ehomespace.com/sign',
            dataType: 'json',
            data:{
                url:location.href
                // Bom对象 location
            },
             type:'post',
            success: function (data) {
                console.log(data)
                wx.config({
                    debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                    appId: 'wx53586ebba24d207d', // 必填，公众号的唯一标识
                    timestamp: data.timestamp , // 必填，生成签名的时间戳
                    nonceStr: data.nonceStr, // 必填，生成签名的随机串
                    signature: data.signature,// 必填，签名
                    jsApiList: [] // 必填，需要使用的JS接口列表
                });

                wx.ready(function () {
                    console.log('123')
                })
            }
        })

        // $('#btn').click(() => {
        //     $.ajax({
        //         type: 'get',
        //         url: 'http://localhost:8888/data',
        //         dataType: 'json',
        //         success: function (data) {
        //             console.log(data)
        //         }
        //     })
        // })
    </script>
</body>

</html>